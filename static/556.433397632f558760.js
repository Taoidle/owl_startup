"use strict";(self.webpackChunkOwlNetworkFrontView=self.webpackChunkOwlNetworkFrontView||[]).push([[556],{1556:(Z,f,s)=>{s.r(f),s.d(f,{UpdateModule:()=>d});var u=s(202),_=s(529),e=s(4650),l=s(5412),h=s(6895),b=s(3238),v=s(1281);const B=new e.OlP("MAT_PROGRESS_BAR_DEFAULT_OPTIONS"),M=(0,b.pj)(class{constructor(i){this._elementRef=i}},"primary");let A=(()=>{class i extends M{constructor(n,t,a,m,o){super(n),this._ngZone=t,this._changeDetectorRef=a,this._animationMode=m,this._isNoopAnimation=!1,this._value=0,this._bufferValue=0,this.animationEnd=new e.vpe,this._mode="determinate",this._transitionendHandler=x=>{0===this.animationEnd.observers.length||!x.target||!x.target.classList.contains("mdc-linear-progress__primary-bar")||("determinate"===this.mode||"buffer"===this.mode)&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))},this._isNoopAnimation="NoopAnimations"===m,o&&(o.color&&(this.color=this.defaultColor=o.color),this.mode=o.mode||this.mode)}get value(){return this._value}set value(n){this._value=y((0,v.su)(n)),this._changeDetectorRef.markForCheck()}get bufferValue(){return this._bufferValue||0}set bufferValue(n){this._bufferValue=y((0,v.su)(n)),this._changeDetectorRef.markForCheck()}get mode(){return this._mode}set mode(n){this._mode=n,this._changeDetectorRef.markForCheck()}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("transitionend",this._transitionendHandler)})}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._transitionendHandler)}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${"buffer"===this.mode?this.bufferValue:100}%`}_isIndeterminate(){return"indeterminate"===this.mode||"query"===this.mode}}return i.\u0275fac=function(n){return new(n||i)(e.Y36(e.SBq),e.Y36(e.R0b),e.Y36(e.sBO),e.Y36(e.QbO,8),e.Y36(B,8))},i.\u0275cmp=e.Xpm({type:i,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:8,hostBindings:function(n,t){2&n&&(e.uIk("aria-valuenow",t._isIndeterminate()?null:t.value)("mode",t.mode),e.ekj("_mat-animation-noopable",t._isNoopAnimation)("mdc-linear-progress--animation-ready",!t._isNoopAnimation)("mdc-linear-progress--indeterminate",t._isIndeterminate()))},inputs:{color:"color",value:"value",bufferValue:"bufferValue",mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],features:[e.qOj],decls:7,vars:4,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"div",1)(2,"div",2),e.qZA(),e.TgZ(3,"div",3),e._UZ(4,"span",4),e.qZA(),e.TgZ(5,"div",5),e._UZ(6,"span",4),e.qZA()),2&n&&(e.xp6(1),e.Udp("flex-basis",t._getBufferBarFlexBasis()),e.xp6(2),e.Udp("transform",t._getPrimaryBarTransform()))},styles:["@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(var(--mdc-linear-progress-primary-half, 83.67142%))}100%{transform:translateX(var(--mdc-linear-progress-primary-full, 200.611057%))}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(var(--mdc-linear-progress-secondary-quarter, 37.651913%))}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(var(--mdc-linear-progress-secondary-half, 84.386165%))}100%{transform:translateX(var(--mdc-linear-progress-secondary-full, 160.277782%))}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(-10px)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(var(--mdc-linear-progress-primary-half-neg, -83.67142%))}100%{transform:translateX(var(--mdc-linear-progress-primary-full-neg, -200.611057%))}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(var(--mdc-linear-progress-secondary-quarter-neg, -37.651913%))}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(var(--mdc-linear-progress-secondary-half-neg, -84.386165%))}100%{transform:translateX(var(--mdc-linear-progress-secondary-full-neg, -160.277782%))}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}@media screen and (forced-colors: active){.mdc-linear-progress{outline-color:CanvasText}}.mdc-linear-progress__bar{position:absolute;width:100%;height:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid}.mdc-linear-progress__buffer{display:flex;position:absolute;width:100%;height:100%}.mdc-linear-progress__buffer-dots{background-repeat:repeat-x;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering 250ms infinite linear}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress:not([dir=ltr]) .mdc-linear-progress__bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]) .mdc-linear-progress__bar{right:0;-webkit-transform-origin:center right;transform-origin:center right}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress:not([dir=ltr]) .mdc-linear-progress__buffer-dots,.mdc-linear-progress[dir=rtl]:not([dir=ltr]) .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;transform:rotate(0)}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}.mdc-linear-progress--closed{opacity:0}.mdc-linear-progress--closed-animation-off .mdc-linear-progress__buffer-dots{animation:none}.mdc-linear-progress--closed-animation-off.mdc-linear-progress--indeterminate .mdc-linear-progress__bar,.mdc-linear-progress--closed-animation-off.mdc-linear-progress--indeterminate .mdc-linear-progress__bar .mdc-linear-progress__bar-inner{animation:none}.mdc-linear-progress__bar-inner{border-color:var(--mdc-linear-progress-active-indicator-color, #6200ee)}.mdc-linear-progress__buffer-dots{background-image:url(\"data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='none slice'%3E%3Ccircle cx='1' cy='1' r='1' fill='%23e6e6e6'/%3E%3C/svg%3E\")}.mdc-linear-progress__buffer-bar{background-color:#e6e6e6}.mdc-linear-progress{height:var(--mdc-linear-progress-track-height, 4px)}.mdc-linear-progress__bar-inner{border-top-width:var(--mdc-linear-progress-track-height, 4px)}.mdc-linear-progress__buffer-dots{background-size:10px var(--mdc-linear-progress-track-height, 4px)}.mat-mdc-progress-bar{display:block}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}"],encapsulation:2,changeDetection:0}),i})();function y(i,r=0,n=100){return Math.max(r,Math.min(n,i))}let O=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[b.BQ]}),i})();class c{constructor(){this.fileDropped=new e.vpe}onDragOver(r){r.preventDefault(),r.stopPropagation(),this.fileOver=!0}onDragLeave(r){r.preventDefault(),r.stopPropagation(),this.fileOver=!1}ondrop(r){r.preventDefault(),r.stopPropagation(),this.fileOver=!1;let n=r.dataTransfer.files;n.length>0&&this.fileDropped.emit(n)}}c.\u0275fac=function(r){return new(r||c)},c.\u0275dir=e.lG2({type:c,selectors:[["","appDnd",""]],hostVars:2,hostBindings:function(r,n){1&r&&e.NdJ("dragover",function(a){return n.onDragOver(a)})("dragleave",function(a){return n.onDragLeave(a)})("drop",function(a){return n.ondrop(a)}),2&r&&e.ekj("fileover",n.fileOver)},outputs:{fileDropped:"fileDropped"}});var D=s(4859);const C=["fileDropRef"];function P(i,r){if(1&i){const n=e.EpF();e.TgZ(0,"div",9),e._UZ(1,"img",10),e.TgZ(2,"div",11)(3,"h4",12),e._uU(4),e.qZA(),e.TgZ(5,"p",13),e._uU(6),e.qZA(),e._UZ(7,"mat-progress-bar",14),e.qZA(),e.TgZ(8,"img",15),e.NdJ("click",function(){const m=e.CHM(n).index,o=e.oxw();return e.KtG(o.cancelUpload(m))}),e.qZA()()}if(2&i){const n=r.$implicit,t=e.oxw();e.xp6(4),e.hij(" ",null==n?null:n.name," "),e.xp6(2),e.hij(" ",t.formatBytes(null==n?null:n.size)," "),e.xp6(1),e.Q6J("value",n.progress)}}class p{constructor(r,n){this.http=r,this.dialog=n,this.uploadSub=[],this.files=[],this.fileIndex=0}onFileDropped(r){let t=r.currentTarget.files;this.fileIndex=this.files.length,null!==t&&this.prepareFilesList(t[0])}fileBrowseHandler(r){let t=r.currentTarget.files;this.fileIndex=this.files.length,null!==t&&this.prepareFilesList(t[0])}prepareFilesList(r){if(null!==r){const n=r.name.split(".");"zip"===n[n.length-1]?(r.progress=0,this.files.push(r),this.fileDropEl.nativeElement.value="",this.uploadFilesSimulator(this.fileIndex)):this.dialog.open(g)}}uploadFilesSimulator(r){console.log("uploadFilesSimulator"),this.uploadSub[r]=this.upload(this.files[r]).subscribe(n=>{n.type==_.dt.UploadProgress&&(this.files[r].progress=Math.round(n.loaded/n.total*100))}),void 0!==this.uploadSub[r]&&(this.fileIndex+=1,console.log("this.fileIndex:",this.fileIndex))}upload(r){const n=new FormData;return n.append("file",r,r.name),this.http.post("/api/update",n,{reportProgress:!0,observe:"events"})}formatBytes(r,n=2){if(0===r)return"0 Bytes";const a=n<=0?0:n,o=Math.floor(Math.log(r)/Math.log(1024));return parseFloat((r/Math.pow(1024,o)).toFixed(a))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][o]}cancelUpload(r){void 0!==this.uploadSub[r]&&this.uploadSub[r].unsubscribe(),this.files.splice(r,1),this.uploadSub=this.uploadSub.filter(n=>n!==this.uploadSub[r])}}p.\u0275fac=function(r){return new(r||p)(e.Y36(_.eN),e.Y36(l.uw))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-update"]],viewQuery:function(r,n){if(1&r&&e.Gf(C,5),2&r){let t;e.iGM(t=e.CRH())&&(n.fileDropEl=t.first)}},decls:14,vars:1,consts:[[1,"mat-card-container"],[1,"card-container"],["appDnd","",1,"dropzone",3,"fileDropped"],["type","file","id","fileDropRef","multiple","",3,"change"],["fileDropRef",""],[1,"dropzone-item"],["src","assets/icons/cloud_upload_FILL0_wght400_GRAD0_opsz48.svg","alt",""],["for","fileDropRef"],["class","single-file",4,"ngFor","ngForOf"],[1,"single-file"],["src","assets/icons/description_FILL0_wght400_GRAD0_opsz48.svg","width","54px","alt","file"],[1,"info"],[1,"name"],[1,"size"],["mode","determinate",3,"value"],["src","assets/icons/delete_FILL0_wght400_GRAD0_opsz48.svg","width","32px","alt","file",3,"click"]],template:function(r,n){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.NdJ("fileDropped",function(a){return n.onFileDropped(a)}),e.TgZ(3,"input",3,4),e.NdJ("change",function(a){return n.fileBrowseHandler(a)}),e.qZA(),e.TgZ(5,"div",5),e._UZ(6,"img",6),e.TgZ(7,"h3"),e._uU(8,"Drag and drop file here"),e.qZA(),e.TgZ(9,"h3"),e._uU(10,"or"),e.qZA(),e.TgZ(11,"label",7),e._uU(12,"Browse for file"),e.qZA()()(),e.YNc(13,P,9,3,"div",8),e.qZA()()),2&r&&(e.xp6(13),e.Q6J("ngForOf",n.files))},dependencies:[A,h.sg,c],styles:[".mat-card-container[_ngcontent-%COMP%]{display:table;width:100%;height:calc(100% - 60px)}.card-container[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}.dropzone[_ngcontent-%COMP%]{display:flex;width:92%;height:60%;padding:2rem .5rem;justify-content:center;text-align:center;align-items:center;background-color:#f8f8f8;border:dashed 1px #979797;position:relative;margin:0 auto;border-radius:5px}input[_ngcontent-%COMP%]{opacity:0;position:absolute;z-index:2;width:100%;height:100%;top:0;left:0}.dropzone-item[_ngcontent-%COMP%]{margin-bottom:10%}label[_ngcontent-%COMP%]{color:#fff;width:200px;height:160px;border-radius:22px;background-color:#000;padding:8px 16px}h3[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#38424c}.single-file[_ngcontent-%COMP%]{display:flex;padding:.5rem;width:92%;justify-content:center;align-items:center;margin:.5rem auto;background-color:#f8f8f8;border:dashed 1px #979797;position:relative;border-radius:5px}.single-file[_ngcontent-%COMP%]   img.delete[_ngcontent-%COMP%]{margin-left:.5rem;cursor:pointer;align-self:flex-end}.single-file[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#353f4a;margin:0}.single-file[_ngcontent-%COMP%]   .size[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:#a4a4a4;margin:0;margin-bottom:.25rem}.single-file[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{width:100%}"]});class g{}g.\u0275fac=function(r){return new(r||g)},g.\u0275cmp=e.Xpm({type:g,selectors:[["alert-dialog-filetype"]],decls:7,vars:0,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions","",1,"close"],["mat-button","","mat-dialog-close",""]],template:function(r,n){1&r&&(e.TgZ(0,"h1",0),e._uU(1,"\u8b66\u544a"),e.qZA(),e.TgZ(2,"div",1),e._uU(3,"\u4e0a\u4f20\u5931\u8d25\uff0c\u6587\u4ef6\u5fc5\u987b\u4e3azip\u538b\u7f29\u5305"),e.qZA(),e.TgZ(4,"div",2)(5,"button",3),e._uU(6,"\u5173\u95ed"),e.qZA()())},dependencies:[l.ZT,l.uh,l.xY,l.H8,D.lW],styles:[".close[_ngcontent-%COMP%]{float:right}"]});const F=[{path:"",component:p}];class d{}d.\u0275fac=function(r){return new(r||d)},d.\u0275mod=e.oAB({type:d}),d.\u0275inj=e.cJS({imports:[u.Bz.forChild(F),O,l.Is,D.ot,u.Bz]})}}]);